<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜é½¢è€…è–¬å‰¤å­¦ç¿’ã‚¢ãƒ—ãƒª Pro (Ver.18.0)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .tap-highlight-transparent { -webkit-tap-highlight-color: transparent; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .animate-fade-in { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        details > summary { list-style: none; cursor: pointer; }
        details > summary::-webkit-details-marker { display: none; }
    </style>
</head>
<body class="bg-slate-100 text-slate-800 min-h-screen pb-24 tap-highlight-transparent">

    <!-- Header -->
    <header class="bg-indigo-900 text-white p-3 shadow-md sticky top-0 z-30">
        <div class="max-w-3xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2">
                <i data-lucide="shield-alert" class="h-6 w-6 text-emerald-400"></i>
                <div>
                    <h1 class="text-base font-bold leading-tight">è–¬å‰¤åˆ¤æ–­ã‚µãƒãƒ¼ãƒˆ Pro</h1>
                    <p class="text-[10px] text-indigo-300">Ver.18.0 åˆ¤å®šãƒ«ãƒ¼ãƒ«è©³ç´°è¡¨ç¤ºç‰ˆ</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main -->
    <main class="max-w-3xl mx-auto p-3" id="app"></main>

    <!-- Nav -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-20 safe-bottom">
        <div class="max-w-3xl mx-auto grid grid-cols-3 gap-1 p-1">
            <button onclick="app.setTab('symptom')" id="btn-symptom" class="flex flex-col items-center p-2 rounded-xl transition-all active:scale-95">
                <i data-lucide="stethoscope" class="h-6 w-6 mb-0.5"></i>
                <span class="text-[10px] font-bold">ç—‡çŠ¶ã‹ã‚‰</span>
            </button>
            <button onclick="app.setTab('advisor')" id="btn-advisor" class="flex flex-col items-center p-2 rounded-xl transition-all active:scale-95">
                <i data-lucide="arrow-left-right" class="h-6 w-6 mb-0.5"></i>
                <span class="text-[10px] font-bold">æ¯”è¼ƒãƒ»ç›¸è«‡</span>
            </button>
            <button onclick="app.setTab('list')" id="btn-list" class="flex flex-col items-center p-2 rounded-xl transition-all active:scale-95">
                <i data-lucide="search" class="h-6 w-6 mb-0.5"></i>
                <span class="text-[10px] font-bold">å…¨ãƒªã‚¹ãƒˆ</span>
            </button>
        </div>
    </nav>

    <!-- Drug Detail Modal -->
    <div id="modal-overlay" class="fixed inset-0 bg-black/60 z-50 hidden backdrop-blur-sm flex items-center justify-center p-4 transition-opacity" onclick="app.closeModal(event)">
        <div id="modal-card" class="bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] flex flex-col animate-fade-in" onclick="event.stopPropagation()">
            <!-- Content Injected Here -->
        </div>
    </div>

    <script>
        // --- 1. è–¬å‰¤ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ (88ä»¶) ---
        const DRUGS = [
            // æŠ—ç”Ÿå‰¤
            { id: 1, name: "ã‚±ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹", general: "ã‚»ãƒ•ã‚¡ãƒ¬ã‚­ã‚·ãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ã‚»ãƒ•ã‚§ãƒ ç³»", note: "ç´°èŒã‚’æ®ºã™ã€‚ã‚«ãƒ—ã‚»ãƒ«å‰¤ã€‚", safety_renal: 8, safety_fall: 10, form: 'capsule' },
            { id: 2, name: "ãƒ•ãƒ­ãƒ¢ãƒƒã‚¯ã‚¹", general: "ã‚»ãƒ•ã‚«ãƒšãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ã‚»ãƒ•ã‚§ãƒ ç³»", note: "å°å…ã‹ã‚‰é«˜é½¢è€…ã¾ã§é »ç”¨ã€‚", safety_renal: 8, safety_fall: 10 },
            { id: 3, name: "ã‚»ãƒ•ã‚¾ãƒ³", general: "ã‚»ãƒ•ã‚¸ãƒ‹ãƒ«", cat: "æŠ—ç”Ÿå‰¤", ef: "ã‚»ãƒ•ã‚§ãƒ ç³»", note: "é‰„å‰¤ã¨ã®ä½µç”¨ã§ä¾¿ãŒèµ¤ããªã‚‹ã€‚", safety_renal: 8, safety_fall: 10, form: 'capsule' },
            { id: 4, name: "ãƒ¡ã‚¤ã‚¢ã‚¯ãƒˆ", general: "ã‚»ãƒ•ã‚¸ãƒˆãƒ¬ãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ã‚»ãƒ•ã‚§ãƒ ç³»", note: "é£Ÿå¾Œã®æœç”¨æ¨å¥¨ã€‚", safety_renal: 8, safety_fall: 10 },
            { id: 5, name: "ã‚·ãƒ—ãƒ­ã‚­ã‚µãƒ³", general: "ã‚·ãƒ—ãƒ­ãƒ•ãƒ­ã‚­ã‚µã‚·ãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³ç³»", note: "å°¿è·¯æ„ŸæŸ“ç—‡ãªã©ã«ã€‚", safety_renal: 5, safety_fall: 9 },
            { id: 6, name: "ã‚¯ãƒ©ãƒ“ãƒƒãƒˆ", general: "ãƒ¬ãƒœãƒ•ãƒ­ã‚­ã‚µã‚·ãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³ç³»", note: "1æ—¥1å›ã‚¿ã‚¤ãƒ—ã€‚NSAIDsä½µç”¨æ³¨æ„ã€‚", safety_renal: 4, safety_fall: 9 },
            { id: 7, name: "ã‚¸ã‚§ãƒ‹ãƒŠãƒƒã‚¯", general: "ã‚·ã‚¿ãƒ•ãƒ­ã‚­ã‚µã‚·ãƒ³", cat: "æŠ—ç”Ÿå‰¤", ef: "ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³ç³»", note: "å‘¼å¸å™¨æ„ŸæŸ“ç—‡ã«å¼·ã„ã€‚", safety_renal: 5, safety_fall: 9 },
            
            // ç²¾ç¥ãƒ»ç¥çµŒ
            { id: 8, name: "ã‚¢ãƒªã‚»ãƒ—ãƒˆ", general: "ãƒ‰ãƒãƒšã‚¸ãƒ«", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—èªçŸ¥ç—‡è–¬", note: "ã‚¢ãƒ«ãƒ„ãƒã‚¤ãƒãƒ¼å‹ã€‚æ„æ¬²å‘ä¸Šã€‚", safety_renal: 10, safety_fall: 10 },
            { id: 9, name: "ãƒ¬ãƒŸãƒ‹ãƒ¼ãƒ«", general: "ã‚¬ãƒ©ãƒ³ã‚¿ãƒŸãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—èªçŸ¥ç—‡è–¬", note: "ã‚¢ãƒ«ãƒ„ãƒã‚¤ãƒãƒ¼å‹ã€‚", safety_renal: 8, safety_fall: 9 },
            { id: 10, name: "ãƒ¡ãƒãƒªãƒ¼", general: "ãƒ¡ãƒãƒ³ãƒãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "NMDAå—å®¹ä½“æ‹®æŠ—è–¬", note: "èˆˆå¥®ã‚’æŠ‘ãˆã‚‹ã€‚è…æ’æ³„å‹ã€‚", safety_renal: 6, safety_fall: 9 },
            { id: 11, name: "ãƒªãƒã‚¹ã‚¿ãƒƒãƒ", general: "ãƒªãƒã‚¹ãƒã‚°ãƒŸãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "è²¼ã‚‹æŠ—èªçŸ¥ç—‡è–¬", note: "çš®è†šã®ã‹ã¶ã‚Œã«æ³¨æ„ã€‚", safety_renal: 9, safety_fall: 10, form: 'tape' },
            { id: 12, name: "ãƒ‘ã‚­ã‚·ãƒ«", general: "ãƒ‘ãƒ­ã‚­ã‚»ãƒãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã†ã¤è–¬(SSRI)", note: "ã†ã¤ã€ãƒ‘ãƒ‹ãƒƒã‚¯éšœå®³ã€‚", safety_renal: 8, safety_fall: 7, anticol: true },
            { id: 13, name: "ãƒ‡ãƒ—ãƒ­ãƒ¡ãƒ¼ãƒ«", general: "ãƒ•ãƒ«ãƒœã‚­ã‚µãƒŸãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã†ã¤è–¬(SSRI)", note: "å¼·è¿«æ€§éšœå®³ãªã©ã«ã‚‚ã€‚", safety_renal: 8, safety_fall: 7 },
            { id: 14, name: "ã‚¸ã‚§ã‚¤ã‚¾ãƒ­ãƒ•ãƒˆ", general: "ã‚»ãƒ«ãƒˆãƒ©ãƒªãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã†ã¤è–¬(SSRI)", note: "é«˜é½¢è€…ã«ã‚‚ä½¿ã„ã‚„ã™ã„ã€‚", safety_renal: 9, safety_fall: 8 },
            { id: 15, name: "ãƒ¬ã‚¹ãƒªãƒ³", general: "ãƒˆãƒ©ã‚¾ãƒ‰ãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã†ã¤è–¬", note: "çœ æ°—ã‚’å‚¬ã™ãŸã‚å°±å¯å‰ã«ä½¿ã†ã“ã¨ã‚‚ã€‚", safety_renal: 8, safety_fall: 5, anticol: true },
            { id: 16, name: "ã‚¤ãƒ¼ã‚±ãƒ—ãƒ©", general: "ãƒ¬ãƒ™ãƒãƒ©ã‚»ã‚¿ãƒ ", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã¦ã‚“ã‹ã‚“è–¬", note: "é«˜é½¢è€…ã¦ã‚“ã‹ã‚“ã®ç¬¬ä¸€é¸æŠã€‚", safety_renal: 5, safety_fall: 8 },
            { id: 17, name: "ãƒˆãƒ”ãƒŠ", general: "ãƒˆãƒ”ãƒ©ãƒãƒ¼ãƒˆ", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã¦ã‚“ã‹ã‚“è–¬", note: "ç‰‡é ­ç—›äºˆé˜²ã«ã‚‚ä½¿ã‚ã‚Œã‚‹ã€‚", safety_renal: 6, safety_fall: 8 },
            { id: 18, name: "ãƒ‡ãƒ‘ã‚±ãƒ³", general: "ãƒãƒ«ãƒ—ãƒ­é…¸", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã¦ã‚“ã‹ã‚“è–¬", note: "æ°—åˆ†å®‰å®šè–¬ã¨ã—ã¦ã‚‚ä½¿ç”¨ã€‚", safety_renal: 7, safety_fall: 8 },
            { id: 19, name: "ãƒ©ãƒ³ãƒ‰ã‚»ãƒ³", general: "ã‚¯ãƒ­ãƒŠã‚¼ãƒ‘ãƒ ", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ã¦ã‚“ã‹ã‚“è–¬", note: "ç­‹å¼›ç·©ä½œç”¨ã€é®é™ä½œç”¨ã€‚", safety_renal: 8, safety_fall: 4 },
            { id: 20, name: "ãƒã‚ªãƒ‰ãƒ‘ã‚¾ãƒ¼ãƒ«", general: "ãƒ¬ãƒœãƒ‰ãƒ‘", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…", note: "ãƒ‰ãƒ‘ãƒŸãƒ³è£œå……ã€‚åŸºæœ¬è–¬ã€‚", safety_renal: 9, safety_fall: 7 },
            { id: 21, name: "ãƒãƒ‰ãƒ‘ãƒ¼", general: "ãƒ¬ãƒœãƒ‰ãƒ‘", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…", note: "ãƒ‰ãƒ‘ãƒŸãƒ³è£œå……ã€‚", safety_renal: 9, safety_fall: 7 },
            { id: 22, name: "ã‚¿ã‚¹ãƒ¢ãƒªãƒ³", general: "ãƒ“ãƒšãƒªãƒ‡ãƒ³", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æŠ—ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…", note: "æ‰‹ã®éœ‡ãˆï¼ˆæŒ¯æˆ¦ï¼‰ã«åŠ¹ãã€‚", safety_renal: 8, safety_fall: 6, anticol: true },
            { id: 23, name: "æŠ‘è‚æ•£", general: "æ¼¢æ–¹è–¬", cat: "ç²¾ç¥ãƒ»ç¥çµŒ", ef: "æ¼¢æ–¹è–¬", note: "èªçŸ¥ç—‡ã®ã‚¤ãƒ©ã‚¤ãƒ©ãƒ»æ€’ã‚Šã£ã½ã•ã«ã€‚", safety_renal: 10, safety_fall: 10 },
            // ç¡çœ è–¬
            { id: 24, name: "ãƒã‚¤ã‚¹ãƒªãƒ¼", general: "ã‚¾ãƒ«ãƒ”ãƒ‡ãƒ ", cat: "ç¡çœ è–¬", ef: "è¶…çŸ­æ™‚é–“å‹", note: "å¯ä»˜ãæ”¹å–„ã€‚è»¢å€’ãƒ»å¥å¿˜æ³¨æ„ã€‚", safety_renal: 10, safety_fall: 4 },
            { id: 25, name: "ãƒ¬ãƒ³ãƒ‰ãƒ«ãƒŸãƒ³", general: "ãƒ–ãƒ­ãƒã‚¾ãƒ©ãƒ ", cat: "ç¡çœ è–¬", ef: "çŸ­æ™‚é–“å‹", note: "ä¸­é€”è¦šé†’ã«ã‚‚æœ‰åŠ¹ã€‚ãµã‚‰ã¤ãæ³¨æ„ã€‚", safety_renal: 10, safety_fall: 2 },
            { id: 26, name: "ã‚¢ãƒ¢ãƒãƒ³", general: "ã‚¾ãƒ”ã‚¯ãƒ­ãƒ³", cat: "ç¡çœ è–¬", ef: "è¶…çŸ­æ™‚é–“å‹", note: "ç¿Œæœã®è‹¦å‘³ãŒç‰¹å¾´ã€‚", safety_renal: 10, safety_fall: 4 },
            { id: 27, name: "ãƒ«ãƒã‚¹ã‚¿", general: "ã‚¨ã‚¹ã‚¾ãƒ”ã‚¯ãƒ­ãƒ³", cat: "ç¡çœ è–¬", ef: "è¶…çŸ­æ™‚é–“å‹", note: "ã‚¢ãƒ¢ãƒãƒ³ã®è‹¦å‘³ã‚’è»½æ¸›ã€‚", safety_renal: 10, safety_fall: 5 },
            { id: 28, name: "ãƒ™ãƒ«ã‚½ãƒ ãƒ©", general: "ã‚¹ãƒœãƒ¬ã‚­ã‚µãƒ³ãƒˆ", cat: "ç¡çœ è–¬", ef: "ã‚ªãƒ¬ã‚­ã‚·ãƒ³æ‹®æŠ—è–¬", note: "è‡ªç„¶ãªçœ æ°—ã€‚è»¢å€’ãƒªã‚¹ã‚¯ä½ã€‚", safety_renal: 10, safety_fall: 9 },
            { id: 29, name: "ãƒ‡ã‚¨ãƒ“ã‚´", general: "ãƒ¬ãƒ³ãƒœãƒ¬ã‚­ã‚µãƒ³ãƒˆ", cat: "ç¡çœ è–¬", ef: "ã‚ªãƒ¬ã‚­ã‚·ãƒ³æ‹®æŠ—è–¬", note: "å…¥çœ ãƒ»ä¸­é€”è¦šé†’ã«æœ‰åŠ¹ã€‚", safety_renal: 10, safety_fall: 8 },
            { id: 30, name: "ãƒ­ã‚¼ãƒ¬ãƒ ", general: "ãƒ©ãƒ¡ãƒ«ãƒ†ã‚ªãƒ³", cat: "ç¡çœ è–¬", ef: "ãƒ¡ãƒ©ãƒˆãƒ‹ãƒ³å—å‹•æ…‹", note: "ä½“å†…æ™‚è¨ˆèª¿æ•´ã€‚å®‰å…¨æ€§ãŒé«˜ã„ã€‚", safety_renal: 10, safety_fall: 10 },
            // å¾ªç’°å™¨
            { id: 31, name: "ãƒ©ã‚·ãƒƒã‚¯ã‚¹", general: "ãƒ•ãƒ­ã‚»ãƒŸãƒ‰", cat: "å¾ªç’°å™¨", ef: "ãƒ«ãƒ¼ãƒ—åˆ©å°¿è–¬", note: "å¼·åŠ›ãªã‚€ãã¿å–ã‚Šã€‚è„±æ°´æ³¨æ„ã€‚", safety_renal: 6, safety_fall: 7 },
            { id: 32, name: "ãƒ«ãƒ—ãƒ©ãƒƒã‚¯", general: "ãƒˆãƒ©ã‚»ãƒŸãƒ‰", cat: "å¾ªç’°å™¨", ef: "ãƒ«ãƒ¼ãƒ—åˆ©å°¿è–¬", note: "ã‚«ãƒªã‚¦ãƒ ä½ä¸‹ãŒå°‘ãªã„ã€‚", safety_renal: 7, safety_fall: 8 },
            { id: 33, name: "ãƒ€ã‚¤ã‚¢ãƒ¼ãƒˆ", general: "ã‚¢ã‚¾ã‚»ãƒŸãƒ‰", cat: "å¾ªç’°å™¨", ef: "ãƒ«ãƒ¼ãƒ—åˆ©å°¿è–¬", note: "ä½œç”¨æ™‚é–“ãŒé•·ã„ã€‚", safety_renal: 7, safety_fall: 8 },
            { id: 34, name: "ã‚¢ãƒ«ãƒ€ã‚¯ãƒˆãƒ³", general: "ã‚¹ãƒ”ãƒ­ãƒãƒ©ã‚¯ãƒˆãƒ³", cat: "å¾ªç’°å™¨", ef: "ã‚«ãƒªã‚¦ãƒ ä¿æŒæ€§", note: "å¿ƒä¸å…¨æ²»ç™‚ã«ã‚‚ã€‚", safety_renal: 4, safety_fall: 9 },
            { id: 35, name: "ã‚µãƒ ã‚¹ã‚«", general: "ãƒˆãƒ«ãƒãƒ—ã‚¿ãƒ³", cat: "å¾ªç’°å™¨", ef: "æ°´åˆ©å°¿è–¬", note: "æ°´ã ã‘ã‚’å‡ºã™ã€‚Naä½ä¸‹ãªã—ã€‚", safety_renal: 8, safety_fall: 9 },
            { id: 36, name: "ãƒ¯ã‚½ãƒ©ãƒ³", general: "ãƒ™ãƒ©ãƒ‘ãƒŸãƒ«", cat: "å¾ªç’°å™¨", ef: "Caæ‹®æŠ—è–¬", note: "é »è„ˆæ€§ä¸æ•´è„ˆã‚’æŠ‘ãˆã‚‹ã€‚", safety_renal: 8, safety_fall: 9 },
            { id: 37, name: "ã‚¢ãƒ ãƒ­ã‚¸ãƒ³", general: "ã‚¢ãƒ ãƒ­ã‚¸ãƒ”ãƒ³", cat: "å¾ªç’°å™¨", ef: "Caæ‹®æŠ—è–¬", note: "æœ€ã‚‚ä¸€èˆ¬çš„ãªé™åœ§å‰¤ã€‚", safety_renal: 9, safety_fall: 9 },
            { id: 38, name: "ã‚¢ãƒ€ãƒ©ãƒ¼ãƒˆ", general: "ãƒ‹ãƒ•ã‚§ã‚¸ãƒ”ãƒ³", cat: "å¾ªç’°å™¨", ef: "Caæ‹®æŠ—è–¬", note: "è¡€åœ§ã‚’ä¸‹ã’ã‚‹ã€‚", safety_renal: 9, safety_fall: 8 },
            { id: 39, name: "ãƒ–ãƒ­ãƒ—ãƒ¬ã‚¹", general: "ã‚«ãƒ³ãƒ‡ã‚µãƒ«ã‚¿ãƒ³", cat: "å¾ªç’°å™¨", ef: "ARB(é™åœ§å‰¤)", note: "å¿ƒè‡“ä¿è­·ä½œç”¨ã‚ã‚Šã€‚", safety_renal: 6, safety_fall: 9 },
            { id: 40, name: "ãƒŸã‚«ãƒ«ãƒ‡ã‚£ã‚¹", general: "ãƒ†ãƒ«ãƒŸã‚µãƒ«ã‚¿ãƒ³", cat: "å¾ªç’°å™¨", ef: "ARB(é™åœ§å‰¤)", note: "ä½œç”¨æ™‚é–“ãŒé•·ã„ã€‚", safety_renal: 6, safety_fall: 9 },
            { id: 41, name: "ã‚ªãƒ«ãƒ¡ãƒ†ãƒƒã‚¯", general: "ã‚ªãƒ«ãƒ¡ã‚µãƒ«ã‚¿ãƒ³", cat: "å¾ªç’°å™¨", ef: "ARB(é™åœ§å‰¤)", note: "é™åœ§åŠ¹æœãŒå¼·ã„ã€‚", safety_renal: 6, safety_fall: 9 },
            { id: 42, name: "ãƒ¡ã‚¤ãƒ³ãƒ†ãƒ¼ãƒˆ", general: "ãƒ“ã‚½ãƒ—ãƒ­ãƒ­ãƒ¼ãƒ«", cat: "å¾ªç’°å™¨", ef: "Î²é®æ–­è–¬", note: "è„ˆã‚’ã‚†ã£ãã‚Šã«ã—ã¦å¿ƒè‡“ã‚’ä¼‘ã‚ã‚‹ã€‚", safety_renal: 8, safety_fall: 8 },
            // è¡€æ¶²ãƒ»è¡€ç®¡
            { id: 43, name: "ãƒã‚¤ã‚¢ã‚¹ãƒ”ãƒªãƒ³", general: "ã‚¢ã‚¹ãƒ”ãƒªãƒ³", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—è¡€å°æ¿è–¬", note: "è¡€æ¶²ã‚µãƒ©ã‚µãƒ©ã€‚èƒƒè’ã‚Œæ³¨æ„ã€‚", safety_renal: 8, safety_fall: 9, blood: true },
            { id: 44, name: "ãƒ—ãƒ©ãƒ“ãƒƒã‚¯ã‚¹", general: "ã‚¯ãƒ­ãƒ”ãƒ‰ã‚°ãƒ¬ãƒ«", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—è¡€å°æ¿è–¬", note: "è„³æ¢—å¡äºˆé˜²ãªã©ã€‚", safety_renal: 9, safety_fall: 9, blood: true },
            { id: 45, name: "ã‚¤ã‚°ã‚¶ãƒ¬ãƒ«ãƒˆ", general: "ãƒªãƒãƒ¼ãƒ­ã‚­ã‚µãƒãƒ³", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—å‡å›ºè–¬", note: "å¿ƒæˆ¿ç´°å‹•ã®è¡€æ “äºˆé˜²ã€‚", safety_renal: 5, safety_fall: 9, blood: true },
            { id: 46, name: "ã‚¨ãƒªã‚­ãƒ¥ãƒ¼ã‚¹", general: "ã‚¢ãƒ”ã‚­ã‚µãƒãƒ³", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—å‡å›ºè–¬", note: "è…æ©Ÿèƒ½ä½ä¸‹ã§ã‚‚ä½¿ã„ã‚„ã™ã„ã€‚", safety_renal: 7, safety_fall: 9, blood: true },
            { id: 47, name: "ãƒªã‚¯ã‚·ã‚¢ãƒŠ", general: "ã‚¨ãƒ‰ã‚­ã‚µãƒãƒ³", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—å‡å›ºè–¬", note: "1æ—¥1å›æœç”¨ã€‚", safety_renal: 6, safety_fall: 9, blood: true },
            { id: 48, name: "ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³", general: "ãƒ¯ãƒ«ãƒ•ã‚¡ãƒªãƒ³", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—å‡å›ºè–¬", note: "ç´è±†ãƒ»é’æ±ç¦æ­¢ã€‚", safety_renal: 5, safety_fall: 6, blood: true },
            { id: 88, name: "ã‚ªãƒ‘ãƒ«ãƒ¢ãƒ³", general: "ãƒªãƒãƒ—ãƒ­ã‚¹ãƒˆ", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "PGE1èª˜å°ä½“", note: "è„ŠæŸ±ç®¡ç‹­çª„ç—‡ã®ã—ã³ã‚Œæ”¹å–„ã€‚", safety_renal: 10, safety_fall: 10, blood: true },
            { id: 89, name: "ãƒ—ãƒ¬ã‚¿ãƒ¼ãƒ«", general: "ã‚·ãƒ­ã‚¹ã‚¿ã‚¾ãƒ¼ãƒ«", cat: "è¡€æ¶²ãƒ»è¡€ç®¡", ef: "æŠ—è¡€å°æ¿è–¬", note: "è¡€ç®¡æ‹¡å¼µä½œç”¨ã‚‚ã‚ã‚Šè¶³ã®å†·ãˆã«ã‚‚ã€‚", safety_renal: 9, safety_fall: 9, blood: true },
            // ä»£è¬ãƒ»èƒƒè…¸
            { id: 49, name: "ãƒªãƒ”ãƒˆãƒ¼ãƒ«", general: "ã‚¢ãƒˆãƒ«ãƒã‚¹ã‚¿ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ã‚¹ã‚¿ãƒãƒ³ç³»", note: "LDLã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«ä½ä¸‹ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 50, name: "ã‚¯ãƒ¬ã‚¹ãƒˆãƒ¼ãƒ«", general: "ãƒ­ã‚¹ãƒã‚¹ã‚¿ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ã‚¹ã‚¿ãƒãƒ³ç³»", note: "å¼·åŠ›ãªLDLä½ä¸‹ä½œç”¨ã€‚", safety_renal: 7, safety_fall: 10 },
            { id: 51, name: "ãƒªãƒãƒ­", general: "ãƒ”ã‚¿ãƒã‚¹ã‚¿ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ã‚¹ã‚¿ãƒãƒ³ç³»", note: "ç›¸äº’ä½œç”¨ãŒå°‘ãªã„ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 52, name: "ãƒ¡ãƒãƒ­ãƒãƒ³", general: "ã‚·ãƒ³ãƒã‚¹ã‚¿ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ã‚¹ã‚¿ãƒãƒ³ç³»", note: "ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãªè–¬ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 53, name: "ãƒ­ãƒ¼ã‚³ãƒ¼ãƒ«", general: "ãƒ•ãƒ«ãƒã‚¹ã‚¿ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ã‚¹ã‚¿ãƒãƒ³ç³»", note: "ãƒã‚¤ãƒ«ãƒ‰ãªåŠ¹ãç›®ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 54, name: "ãƒã‚­ã‚·ã‚¦ãƒ ", general: "ã‚¨ã‚½ãƒ¡ãƒ—ãƒ©ã‚¾ãƒ¼ãƒ«", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "PPI(èƒƒè–¬)", note: "èƒƒé…¸åˆ†æ³Œã‚’å¼·åŠ›ã«æŠ‘åˆ¶ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 55, name: "ã‚ªãƒ¡ãƒ—ãƒ©ãƒ¼ãƒ«", general: "ã‚ªãƒ¡ãƒ—ãƒ©ã‚¾ãƒ¼ãƒ«", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "PPI(èƒƒè–¬)", note: "èƒƒæ½°ç˜ãƒ»é€†æµæ€§é£Ÿé“ç‚ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 56, name: "ã‚¿ã‚±ã‚­ãƒ£ãƒ–", general: "ãƒœãƒãƒ—ãƒ©ã‚¶ãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "P-CAB(èƒƒè–¬)", note: "å³åŠ¹æ€§ãŒã‚ã‚Šå¼·åŠ›ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 57, name: "ã‚¬ã‚¹ã‚¿ãƒ¼", general: "ãƒ•ã‚¡ãƒ¢ãƒã‚¸ãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "H2ãƒ–ãƒ­ãƒƒã‚«ãƒ¼", note: "èƒƒé…¸ã‚’æŠ‘ãˆã‚‹ã€‚", safety_renal: 6, safety_fall: 10 },
            { id: 58, name: "ãƒ ã‚³ã‚¹ã‚¿", general: "ãƒ¬ãƒãƒŸãƒ”ãƒ‰", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "èƒƒç²˜è†œä¿è­·", note: "èƒƒã®ç²˜è†œã‚’ä¸ˆå¤«ã«ã™ã‚‹ã€‚", safety_renal: 10, safety_fall: 10 },
            { id: 59, name: "ãƒã‚°ãƒŸãƒƒãƒˆ", general: "é…¸åŒ–ãƒã‚°ãƒã‚·ã‚¦ãƒ ", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ç·©ä¸‹å‰¤", note: "ä¾¿ã‚’æŸ”ã‚‰ã‹ãã™ã‚‹ã€‚æ°´åˆ†å¿…é ˆã€‚", safety_renal: 3, safety_fall: 10 },
            { id: 60, name: "ã‚»ãƒ³ãƒã‚·ãƒ‰", general: "ã‚»ãƒ³ãƒã‚·ãƒ‰", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "åˆºæ¿€æ€§ä¸‹å‰¤", note: "è…¸ã‚’å‹•ã‹ã—ã¦å‡ºã™ã€‚é “ç”¨ãŒå¤šã„ã€‚", safety_renal: 10, safety_fall: 9 },
            { id: 61, name: "ãƒ©ã‚­ã‚½ãƒ™ãƒ­ãƒ³", general: "ãƒ”ã‚³ã‚¹ãƒ«ãƒ•ã‚¡ãƒ¼ãƒˆ", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "æ¶²ä½“ä¸‹å‰¤", note: "æ»´æ•°ã§èª¿æ•´å¯èƒ½ã€‚", safety_renal: 10, safety_fall: 10 },
            { id: 62, name: "ã‚°ãƒ¼ãƒ•ã‚£ã‚¹", general: "ã‚¨ãƒ­ãƒ“ã‚­ã‚·ãƒãƒƒãƒˆ", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "èƒ†æ±é…¸é˜»å®³", note: "é£Ÿå‰ã«é£²ã‚€æ–°ã—ã„ä¾¿ç§˜è–¬ã€‚", safety_renal: 10, safety_fall: 10 },
            { id: 63, name: "ã‚¸ãƒ£ãƒŒãƒ“ã‚¢", general: "ã‚·ã‚¿ã‚°ãƒªãƒ—ãƒãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ç³–å°¿ç—…è–¬", note: "è¡€ç³–å€¤ã‚’ä¸‹ã’ã‚‹ã€‚", safety_renal: 5, safety_fall: 9 },
            { id: 64, name: "ãƒ¡ãƒˆã‚°ãƒ«ã‚³", general: "ãƒ¡ãƒˆãƒ›ãƒ«ãƒŸãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ç³–å°¿ç—…è–¬", note: "ã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠµæŠ—æ€§æ”¹å–„ã€‚", safety_renal: 4, safety_fall: 9 },
            { id: 65, name: "ã‚¸ãƒ£ãƒ‡ã‚£ã‚¢ãƒ³ã‚¹", general: "ã‚¨ãƒ³ãƒ‘ã‚°ãƒªãƒ•ãƒ­ã‚¸ãƒ³", cat: "ä»£è¬ãƒ»èƒƒè…¸", ef: "ç³–å°¿ç—…è–¬", note: "å°¿ã«ç³–ã‚’å‡ºã™ã€‚æ°´åˆ†è£œçµ¦é‡è¦ã€‚", safety_renal: 6, safety_fall: 8 },
            
            // é®ç—›ãƒ»æ•´å½¢
            { id: 77, name: "ã‚«ãƒ­ãƒŠãƒ¼ãƒ«", general: "ã‚¢ã‚»ãƒˆã‚¢ãƒŸãƒãƒ•ã‚§ãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "è§£ç†±é®ç—›å‰¤", note: "èƒƒã«å„ªã—ãå®‰å…¨æ€§ãŒé«˜ã„ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 78, name: "ãƒ­ã‚­ã‚½ãƒ‹ãƒ³", general: "ãƒ­ã‚­ã‚½ãƒ—ãƒ­ãƒ•ã‚§ãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "NSAIDs", note: "ç‚ç—‡ã‚’æŠ‘ãˆã‚‹ã€‚èƒƒè’ã‚Œæ³¨æ„ã€‚", safety_renal: 2, safety_fall: 10, nsaids: true },
            { id: 79, name: "ã‚»ãƒ¬ã‚³ãƒƒã‚¯ã‚¹", general: "ã‚»ãƒ¬ã‚³ã‚­ã‚·ãƒ–", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "NSAIDs", note: "èƒƒè…¸éšœå®³ãŒå°‘ãªã„ã€‚", safety_renal: 4, safety_fall: 10, nsaids: true },
            { id: 80, name: "ãƒ¢ãƒ¼ãƒ©ã‚¹ãƒ†ãƒ¼ãƒ—", general: "ã‚±ãƒˆãƒ—ãƒ­ãƒ•ã‚§ãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "æ¹¿å¸ƒè–¬", note: "å…‰ç·šéæ•ç—‡ã«æ³¨æ„ï¼ˆæ—¥å…‰NGï¼‰ã€‚", safety_renal: 10, safety_fall: 10, form: 'tape', nsaids: true },
            { id: 81, name: "ãƒ­ã‚³ã‚¢ãƒ†ãƒ¼ãƒ—", general: "ã‚¨ã‚¹ãƒ•ãƒ«ãƒ«ãƒ“ãƒ—ãƒ­ãƒ•ã‚§ãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "å¼·åŠ›æ¹¿å¸ƒè–¬", note: "é£²ã¿è–¬ä¸¦ã¿ã«åŠ¹ãã€‚æšæ•°åˆ¶é™ã‚ã‚Šã€‚", safety_renal: 6, safety_fall: 10, form: 'tape', nsaids: true },
            { id: 82, name: "ãƒ„ãƒ ãƒ©68", general: "èŠè–¬ç”˜è‰æ¹¯", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "æ¼¢æ–¹è–¬", note: "ã“ã‚€ã‚‰è¿”ã‚Šç‰¹åŠ¹è–¬ã€‚é€£ç”¨ã§ã‚«ãƒªã‚¦ãƒ ä½ä¸‹ã€‚", safety_renal: 7, safety_fall: 10 },
            { id: 86, name: "ã‚¿ãƒªãƒ¼ã‚¸ã‚§", general: "ãƒŸãƒ­ã‚¬ãƒãƒªãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "ç¥çµŒéšœå®³æ€§ç–¼ç—›", note: "ç¥çµŒã®ç—›ã¿ã€‚è…æ©Ÿèƒ½ã§èª¿æ•´ã€‚ãµã‚‰ã¤ãã€‚", safety_renal: 3, safety_fall: 5 },
            { id: 87, name: "ãƒªãƒªã‚«", general: "ãƒ—ãƒ¬ã‚¬ãƒãƒªãƒ³", cat: "é®ç—›ãƒ»æ•´å½¢", ef: "ç¥çµŒéšœå®³æ€§ç–¼ç—›", note: "ç¥çµŒã®ç—›ã¿ã€‚ã‚ã¾ã„ãƒ»ãµã‚‰ã¤ããŒå¼·ã„ã€‚", safety_renal: 4, safety_fall: 4 },

            // æ³Œå°¿å™¨
            { id: 83, name: "ãƒ™ã‚¿ãƒ‹ã‚¹", general: "ãƒŸãƒ©ãƒ™ã‚°ãƒ­ãƒ³", cat: "æ³Œå°¿å™¨", ef: "éæ´»å‹•è†€èƒ±", note: "é »å°¿ãƒ»å°¿æ¼ã‚Œæ”¹å–„ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 84, name: "ãƒ™ã‚·ã‚±ã‚¢", general: "ã‚½ãƒªãƒ•ã‚§ãƒŠã‚·ãƒ³", cat: "æ³Œå°¿å™¨", ef: "éæ´»å‹•è†€èƒ±", note: "è†€èƒ±ã®åç¸®ã‚’æŠ‘ãˆã‚‹ã€‚", safety_renal: 9, safety_fall: 9, anticol: true },
            { id: 85, name: "ãƒãƒ«ãƒŠãƒ¼ãƒ«", general: "ã‚¿ãƒ ã‚¹ãƒ­ã‚·ãƒ³", cat: "æ³Œå°¿å™¨", ef: "å‰ç«‹è…ºè‚¥å¤§ç—‡", note: "å°¿ã‚’å‡ºã‚„ã™ãã™ã‚‹ã€‚èµ·ç«‹æ€§ä½è¡€åœ§æ³¨æ„ã€‚", safety_renal: 9, safety_fall: 8 },

            // ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨
            { id: 70, name: "ãƒ—ãƒ¬ãƒ‰ãƒ‹ãƒ³", general: "ãƒ—ãƒ¬ãƒ‰ãƒ‹ã‚¾ãƒ­ãƒ³", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰", note: "ç‚ç—‡ãƒ»ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æŠ‘åˆ¶ã€‚", safety_renal: 7, safety_fall: 8, steroid: true },
            { id: 71, name: "ãƒ›ã‚¯ãƒŠãƒªãƒ³ãƒ†ãƒ¼ãƒ—", general: "ãƒ„ãƒ­ãƒ–ãƒ†ãƒ­ãƒ¼ãƒ«", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "æ°—ç®¡æ”¯æ‹¡å¼µè–¬", note: "è²¼ã‚‹ã‚¿ã‚¤ãƒ—ã€‚å’³ãƒ»å–˜æ¯ã€‚", safety_renal: 10, safety_fall: 10, form: 'tape' },
            { id: 73, name: "ã‚¨ãƒã‚¹ãƒ†ãƒ«", general: "ã‚¨ãƒã‚¹ãƒãƒ³", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "æŠ—ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼è–¬", note: "èŠ±ç²‰ç—‡ãƒ»è•éº»ç–¹ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 74, name: "ã‚¿ãƒªã‚ªãƒ³", general: "ãƒ™ãƒã‚¿ã‚¹ãƒãƒ³", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "æŠ—ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼è–¬", note: "é€ŸãåŠ¹ãã€‚ç—’ã¿ãƒ»é¼»ç‚ã€‚", safety_renal: 7, safety_fall: 10 },
            { id: 75, name: "ã‚¢ãƒ¬ã‚°ãƒ©", general: "ãƒ•ã‚§ã‚­ã‚½ãƒ•ã‚§ãƒŠã‚¸ãƒ³", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "æŠ—ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼è–¬", note: "çœ ããªã‚Šã«ãã„ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 76, name: "ã‚¢ã‚¿ãƒ©ãƒƒã‚¯ã‚¹", general: "ãƒ’ãƒ‰ãƒ­ã‚­ã‚·ã‚¸ãƒ³", cat: "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", ef: "æŠ—ãƒ’ã‚¹ã‚¿ãƒŸãƒ³è–¬", note: "ç—’ã¿æ­¢ã‚ã€‚ä¸å®‰æ™‚ã«ã‚‚ã€‚", safety_renal: 8, safety_fall: 6, anticol: true },

            // éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³
            { id: 66, name: "ã‚¨ãƒ‡ã‚£ãƒ­ãƒ¼ãƒ«", general: "ã‚¨ãƒ«ãƒ‡ã‚«ãƒ«ã‚·ãƒˆãƒ¼ãƒ«", cat: "éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³", ef: "æ´»æ€§å‹VitD3", note: "éª¨ç²—é¬†ç—‡ã€‚Caå¸åä¿ƒé€²ã€‚", safety_renal: 9, safety_fall: 10, form: 'capsule' },
            { id: 67, name: "ãƒ¯ãƒ³ã‚¢ãƒ«ãƒ•ã‚¡", general: "ã‚¢ãƒ«ãƒ•ã‚¡ã‚«ãƒ«ã‚·ãƒ‰ãƒ¼ãƒ«", cat: "éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³", ef: "æ´»æ€§å‹VitD3", note: "Caä»£è¬æ”¹å–„ã€‚", safety_renal: 9, safety_fall: 10 },
            { id: 68, name: "ã‚°ãƒ©ã‚±ãƒ¼", general: "ãƒ¡ãƒŠãƒ†ãƒˆãƒ¬ãƒãƒ³", cat: "éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³", ef: "ãƒ“ã‚¿ãƒŸãƒ³K2", note: "éª¨å½¢æˆä¿ƒé€²ã€‚", safety_renal: 10, safety_fall: 10, form: 'capsule' },
            { id: 69, name: "ãƒ¡ãƒã‚³ãƒãƒ¼ãƒ«", general: "ãƒ¡ã‚³ãƒãƒ©ãƒŸãƒ³", cat: "éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³", ef: "ãƒ“ã‚¿ãƒŸãƒ³B12", note: "æœ«æ¢¢ç¥çµŒä¿®å¾©ã€‚ã—ã³ã‚Œã«ã€‚", safety_renal: 10, safety_fall: 10 },

            // ãã®ä»–
            { id: 72, name: "ãƒ¬ã‚°ãƒ†ã‚¯ãƒˆ", general: "ã‚¢ã‚«ãƒ³ãƒ—ãƒ­ã‚µãƒ¼ãƒˆ", cat: "ãã®ä»–", ef: "æ–­é…’è£œåŠ©å‰¤", note: "é£²é…’æ¬²æ±‚ä½æ¸›ã€‚", safety_renal: 9, safety_fall: 10 },
        ];

        const CATEGORIES = ["æŠ—ç”Ÿå‰¤", "ç²¾ç¥ãƒ»ç¥çµŒ", "ç¡çœ è–¬", "å¾ªç’°å™¨", "è¡€æ¶²ãƒ»è¡€ç®¡", "ä»£è¬ãƒ»èƒƒè…¸", "é®ç—›ãƒ»æ•´å½¢", "æ³Œå°¿å™¨", "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ãƒ»å‘¼å¸å™¨", "éª¨ãƒ»ãƒ“ã‚¿ãƒŸãƒ³", "ãã®ä»–"];

        // --- 2. ç—‡çŠ¶ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ---
        const SYMPTOMS = [
            { icon: "moon", label: "çœ ã‚Œãªã„", color: "text-indigo-600 bg-indigo-50", items: [
                { title: "å¯ä»˜ããŒæ‚ªã„", drugIds: [24, 29] },
                { title: "é€”ä¸­ã§èµ·ãã‚‹", drugIds: [25, 28, 29] },
                { title: "è»¢å€’ãƒªã‚¹ã‚¯ã‚ã‚Š", drugIds: [28, 29] }
            ]},
            { icon: "zap", label: "ç—›ã¿ãƒ»ã—ã³ã‚Œ", color: "text-amber-600 bg-amber-50", items: [
                { title: "ç†±ãƒ»é ­ç—›ãƒ»è»½åº¦", drugIds: [77] },
                { title: "è…«ã‚Œãƒ»ç‚ç—‡å¼·ã„", drugIds: [78, 79] },
                { title: "ãƒ”ãƒªãƒ”ãƒªãƒ»ã—ã³ã‚Œ", drugIds: [86, 88, 87] }
            ]},
            { icon: "frown", label: "ä¾¿ç§˜ãƒ»ãŠè…¹", color: "text-rose-600 bg-rose-50", items: [
                { title: "ä¾¿ãŒç¡¬ã„", drugIds: [59] },
                { title: "ä¾¿æ„ãŒãªã„", drugIds: [60] },
                { title: "æ–°ã—ã„è–¬", drugIds: [62] }
            ]},
            { icon: "activity", label: "ç³–å°¿ç—…ãƒ»å¿ƒè‡“", color: "text-blue-600 bg-blue-50", items: [
                { title: "è¡€ç³–ã‚’ä¸‹ã’ã‚‹", drugIds: [63, 64, 65] },
                { title: "å¿ƒä¸å…¨ãƒ»ã‚€ãã¿", drugIds: [31, 32, 34] },
                { title: "è¡€åœ§ã‚’ä¸‹ã’ã‚‹", drugIds: [37, 39, 41] }
            ]},
            { icon: "thermometer", label: "æ„ŸæŸ“ãƒ»é¢¨é‚ª", color: "text-emerald-600 bg-emerald-50", items: [
                { title: "é¢¨é‚ªãƒ»è»½ç—‡", drugIds: [2] },
                { title: "è‚ºç‚ãƒ»è†€èƒ±ç‚", drugIds: [6] }
            ]}
        ];

        const app = {
            state: {
                tab: 'symptom',
                symptomIdx: null,
                cat: null,
                search: '',
                advisor: { 
                    drugA: null, 
                    drugB: null, 
                    profile: { 
                        renal: false, fall: false, senior: true,
                        swallow: false, stomach: false, glaucoma: false, warfarin: false,
                        diabetes: false, dementia: false, bleeding: false, heart: false
                    } 
                }
            },

            init() {
                this.render();
                lucide.createIcons();
            },

            setTab(tab) {
                this.state.tab = tab;
                this.updateNav();
                this.render();
                window.scrollTo(0,0);
            },

            updateNav() {
                ['symptom', 'advisor', 'list'].forEach(t => {
                    const btn = document.getElementById(`btn-${t}`);
                    const isActive = this.state.tab === t;
                    btn.className = `flex flex-col items-center p-2 rounded-xl transition-all ${isActive ? 'text-indigo-700 bg-indigo-50 font-bold scale-105' : 'text-slate-400 hover:bg-slate-50'}`;
                });
                lucide.createIcons();
            },

            setCat(c) { this.state.cat = c; this.state.search = ''; this.render(); },
            setSearch(s) { this.state.search = s; if(s) this.state.cat = null; this.render(); },

            openModal(id) {
                const drug = DRUGS.find(d => d.id === id);
                if(!drug) return;
                
                const card = document.getElementById('modal-card');
                card.innerHTML = `
                    <div class="bg-indigo-900 text-white p-5 relative">
                        <div class="text-xs opacity-70 mb-1">${drug.cat} / ${drug.general}</div>
                        <h2 class="text-2xl font-bold">${drug.name}</h2>
                        <button onclick="app.closeModal()" class="absolute top-4 right-4 bg-white/20 p-1.5 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
                    </div>
                    <div class="p-5 space-y-4">
                        <div class="bg-slate-50 p-3 rounded-lg text-sm text-slate-700 leading-relaxed border border-slate-200">
                            <span class="font-bold text-slate-500 block text-xs mb-1">ç‰¹å¾´</span>
                            ${drug.note}
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3 pt-2">
                            <button onclick="app.setAndGoAdvisor('A', ${drug.id})" class="bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-xl font-bold text-sm shadow-lg active:scale-95 transition-all flex flex-col items-center justify-center gap-1">
                                <i data-lucide="arrow-left-right" class="w-5 h-5"></i>
                                <span>æ¯”è¼ƒ A ã«ã‚»ãƒƒãƒˆ</span>
                            </button>
                            <button onclick="app.setAndGoAdvisor('B', ${drug.id})" class="bg-white border-2 border-indigo-600 text-indigo-700 py-3 rounded-xl font-bold text-sm shadow-sm active:scale-95 transition-all flex flex-col items-center justify-center gap-1">
                                <i data-lucide="plus" class="w-5 h-5"></i>
                                <span>æ¯”è¼ƒ B ã«ã‚»ãƒƒãƒˆ</span>
                            </button>
                        </div>
                        <p class="text-center text-[10px] text-slate-400">ç›¸è«‡ãƒ»æ¯”è¼ƒç”»é¢ã¸ç§»å‹•ã—ã¦åˆ¤å®šã—ã¾ã™</p>
                    </div>
                `;
                document.getElementById('modal-overlay').classList.remove('hidden');
                lucide.createIcons();
            },
            closeModal(e) {
                if(e && e.target.id !== 'modal-overlay' && !e.target.closest('button')) return;
                document.getElementById('modal-overlay').classList.add('hidden');
            },
            setAndGoAdvisor(slot, id) {
                const drug = DRUGS.find(d => d.id === id);
                if(slot === 'A') this.state.advisor.drugA = drug;
                else this.state.advisor.drugB = drug;
                document.getElementById('modal-overlay').classList.add('hidden');
                this.setTab('advisor');
            },

            setAdvisorDrug(slot, id) {
                const d = id ? DRUGS.find(x => x.id == id) : null;
                if(slot === 'A') this.state.advisor.drugA = d;
                else this.state.advisor.drugB = d;
                this.render();
            },
            toggleProfile(key) {
                this.state.advisor.profile[key] = !this.state.advisor.profile[key];
                this.render();
            },
            getAnalysis() {
                const { drugA, drugB, profile } = this.state.advisor;
                if(!drugA && !drugB) return `<div class="text-center py-10 text-slate-400 bg-white rounded-xl border border-dashed border-slate-300">è–¬å‰¤ã‚’é¸æŠã™ã‚‹ã¨<br>ã“ã“ã«åˆ¤å®šçµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>`;

                const check = (d, partner) => {
                    if(!d) return null;
                    let msgs = [];
                    let score = 100;
                    
                    // --- åŸºæœ¬ãƒªã‚¹ã‚¯ ---
                    if(profile.renal && d.safety_renal < 5) { msgs.push({t:'d', m:'è…æ©Ÿèƒ½ä½ä¸‹æ™‚ã¯æ¸›é‡ãƒ»æ³¨æ„ãŒå¿…è¦ã§ã™'}); score-=40; }
                    if(profile.fall && d.safety_fall < 5) { msgs.push({t:'d', m:'è»¢å€’ãƒªã‚¹ã‚¯ãŒé«˜ã„è–¬ã§ã™'}); score-=30; }
                    else if(profile.fall && d.safety_fall < 8) { msgs.push({t:'w', m:'ãµã‚‰ã¤ãã«æ³¨æ„ã—ã¦ãã ã•ã„'}); score-=10; }
                    if(profile.swallow && d.form === 'capsule') { msgs.push({t:'d', m:'ã‚«ãƒ—ã‚»ãƒ«å‰¤ã§ã™ã€‚è„±ã‚«ãƒ—ã‚»ãƒ«ç­‰ã®æŒ‡ç¤ºãŒå¿…è¦ã§ã™ã€‚'}); score-=20; }
                    if(profile.stomach && d.nsaids) { msgs.push({t:'d', m:'èƒƒæ½°ç˜ãƒªã‚¹ã‚¯ã‚ã‚Šã€‚èƒƒè–¬ä½µç”¨ã‹ã‚«ãƒ­ãƒŠãƒ¼ãƒ«ã¸ã®å¤‰æ›´ã‚’ã€‚'}); score-=40; }
                    if(profile.glaucoma && d.anticol) { msgs.push({t:'d', m:'æŠ—ã‚³ãƒªãƒ³ä½œç”¨ã‚ã‚Šã€‚ç·‘å†…éšœãƒ»å‰ç«‹è…ºè‚¥å¤§ç—‡ã«ã¯ç¦å¿Œã®å¯èƒ½æ€§ã€‚'}); score-=50; }
                    if(profile.warfarin) {
                        if(d.id === 48) msgs.push({t:'i', m:'ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³æœç”¨ä¸­ã€‚ç´è±†ãƒ»é’æ±ç¦æ­¢ã®å†å¾¹åº•ã‚’ã€‚'});
                        if(d.nsaids) msgs.push({t:'d', m:'ã€ä½µç”¨å±é™ºã€‘å‡ºè¡€ãƒªã‚¹ã‚¯ãŒå¢—å¤§ã—ã¾ã™ã€‚åŸå‰‡é¿ã‘ã¦ãã ã•ã„ã€‚'}); 
                    }

                    // --- 4å¤§ãƒªã‚¹ã‚¯ ---
                    if(profile.diabetes && d.steroid) { msgs.push({t:'d', m:'ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰ã¯è¡€ç³–å€¤ã‚’ä¸Šæ˜‡ã•ã›ã¾ã™ã€‚è¡€ç³–ç®¡ç†ã«å³é‡æ³¨æ„ã€‚'}); score-=30; }
                    if(profile.dementia) {
                        if(d.anticol) { msgs.push({t:'d', m:'æŠ—ã‚³ãƒªãƒ³ä½œç”¨ã«ã‚ˆã‚ŠèªçŸ¥æ©Ÿèƒ½ãŒæ‚ªåŒ–ã™ã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚'}); score-=30; }
                        if(d.safety_fall < 6) { msgs.push({t:'w', m:'ã›ã‚“å¦„ãƒ»è»¢å€’ã‚’å¼•ãèµ·ã“ã—ã‚„ã™ã„ã§ã™ã€‚'}); score-=20; }
                    }
                    if(profile.bleeding) {
                        if(d.blood || d.nsaids) { msgs.push({t:'d', m:'å‡ºè¡€ãƒªã‚¹ã‚¯ã‚’å¢—å¤§ã•ã›ã¾ã™ã€‚ã‚ã–ã‚„æ¶ˆåŒ–ç®¡å‡ºè¡€ã«æ³¨æ„ã€‚'}); score-=40; }
                    }
                    if(profile.heart) {
                        if(d.nsaids) { msgs.push({t:'d', m:'ã€ç¦å¿Œãƒ¬ãƒ™ãƒ«ã€‘NSAIDsã¯å¿ƒä¸å…¨ã‚’æ‚ªåŒ–ã•ã›ã¾ã™ã€‚åŸå‰‡ä½¿ç”¨ä¸å¯ã€‚'}); score-=90; }
                    }

                    // å€‹åˆ¥ã‚¢ãƒ©ãƒ¼ãƒˆ
                    if(d.id===60) msgs.push({t:'i', m:'é€£ç”¨ã§è€æ€§ãŒã¤ãã¾ã™(é “ç”¨æ¨å¥¨)'});
                    if(d.id===48 && !profile.warfarin) msgs.push({t:'d', m:'ç´è±†ãƒ»ã‚¯ãƒ­ãƒ¬ãƒ©ãƒ»é’æ±ã¯æ‘‚å–ç¦æ­¢ã§ã™ã€‚'});
                    
                    // --- çµ„ã¿åˆã‚ã›ã‚¢ãƒ©ãƒ¼ãƒˆ (ç›¸æ‰‹ã‚’å‚ç…§ã—ã¦åˆ¤å®š) ---
                    if(partner) {
                        // ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³(48) x NSAIDs
                        if(d.id === 48 && partner.nsaids) {
                             msgs.push({t:'d', m:`ã€ä½µç”¨å±é™ºã€‘ç›¸æ‰‹ã®${partner.name}(NSAIDs)ã¨ã®ä½µç”¨ã¯æ¶ˆåŒ–ç®¡å‡ºè¡€ãƒªã‚¹ã‚¯ã‚’å€å¢—ã•ã›ã¾ã™ã€‚åŸå‰‡é¿ã‘ã¦ãã ã•ã„ã€‚`});
                             score -= 50;
                        }
                        if(d.nsaids && partner.id === 48) {
                             msgs.push({t:'d', m:`ã€ä½µç”¨å±é™ºã€‘ç›¸æ‰‹ã®${partner.name}(ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³)ã®ä½œç”¨ã‚’å¢—å¼·ã—å‡ºè¡€ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ã€‚`});
                             score -= 50;
                        }

                        // ã‚­ãƒãƒ­ãƒ³ x NSAIDs
                        if(d.cat==='æŠ—ç”Ÿå‰¤' && d.ef.includes('ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³') && partner.nsaids) {
                            msgs.push({t:'d', m:`ã€ä½µç”¨æ³¨æ„ã€‘ç›¸æ‰‹ã®${partner.name}(NSAIDs)ã¨ã®ä½µç”¨ã¯ç—™æ”£ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚`});
                            score -= 30;
                        }
                        if(d.nsaids && partner.cat==='æŠ—ç”Ÿå‰¤' && partner.ef.includes('ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³')) {
                            msgs.push({t:'d', m:`ã€ä½µç”¨æ³¨æ„ã€‘ç›¸æ‰‹ã®${partner.name}(ãƒ‹ãƒ¥ãƒ¼ã‚­ãƒãƒ­ãƒ³ç³»)ã¨ã®ä½µç”¨ã¯ç—™æ”£ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚ã‚«ãƒ­ãƒŠãƒ¼ãƒ«ã¸ã®å¤‰æ›´ã‚’æ¨å¥¨ã€‚`});
                            score -= 30;
                        }
                    }

                    return { msgs, score };
                };

                const resA = check(drugA, drugB);
                const resB = check(drugB, drugA);

                const card = (d, res, label) => {
                    if(!d) return `<div class="bg-slate-50 rounded-xl p-4 border border-dashed border-slate-300 text-center text-slate-400 text-xs">é¸æŠãªã—</div>`;
                    return `
                        <div class="bg-white rounded-xl p-4 border-l-4 shadow-sm ${res.score < 70 ? 'border-red-500' : 'border-emerald-500'}">
                            <div class="text-[10px] font-bold text-slate-400 mb-1">${label}</div>
                            <h3 class="font-bold text-lg text-slate-800 flex justify-between items-center">
                                ${d.name}
                                <span class="text-xs px-2 py-0.5 rounded bg-slate-100 text-slate-500">ç‚¹æ•°:${res.score}</span>
                            </h3>
                            <div class="mt-2 space-y-1">
                                ${res.msgs.length ? res.msgs.map(m => `<div class="text-xs ${m.t==='d'?'text-red-600 font-bold':m.t==='w'?'text-amber-600':'text-blue-600'}">ãƒ»${m.m}</div>`).join('') : '<div class="text-xs text-emerald-600">æ‡¸å¿µäº‹é …ã¯ã‚ã‚Šã¾ã›ã‚“</div>'}
                            </div>
                        </div>
                    `;
                };

                let resultHtml = `<div class="space-y-4">`;
                
                if(drugA && drugB) {
                    const diff = resA.score - resB.score;
                    let verdict = "";
                    let color = "bg-slate-700";
                    let icon = "scale";

                    // 1. å±é™ºãªä½µç”¨ã‚„ä½ã‚¹ã‚³ã‚¢æ™‚ã®åˆ¤å®šã‚’å„ªå…ˆ
                    if (resA.score < 60 && resB.score < 60) {
                         verdict = "âš  ä¸¡è–¬å‰¤ã¨ã‚‚ãƒªã‚¹ã‚¯ãŒé«˜ã„ã€ã¾ãŸã¯ä½µç”¨æ³¨æ„ã§ã™";
                         color = "bg-red-600 animate-pulse";
                         icon = "alert-triangle";
                    } else {
                        // 2. é€šå¸¸ã®æ¯”è¼ƒ
                        if(diff > 10) { 
                            verdict = `ğŸ‘‰ ${drugA.name} ã®æ–¹ãŒé©ã—ã¦ã„ã¾ã™`; 
                            color = "bg-emerald-600"; 
                            icon = "thumbs-up";
                        } else if(diff < -10) { 
                            verdict = `ğŸ‘‰ ${drugB.name} ã®æ–¹ãŒé©ã—ã¦ã„ã¾ã™`; 
                            color = "bg-emerald-600"; 
                            icon = "thumbs-up";
                        } else {
                            verdict = "å®‰å…¨æ€§ã‚¹ã‚³ã‚¢ã¯åŒç¨‹åº¦ã§ã™";
                            color = "bg-slate-600";
                        }
                    }
                    
                    resultHtml += `
                        <div class="${color} text-white p-4 rounded-xl text-center shadow-lg mb-2 transition-all">
                            <div class="text-xs opacity-80 mb-1 flex justify-center items-center gap-1">
                                <i data-lucide="${icon}" class="w-3 h-3"></i> AIåˆ¤å®šçµæœ
                            </div>
                            <div class="font-bold text-lg leading-tight">${verdict}</div>
                        </div>
                    `;
                }

                resultHtml += `<div class="grid gap-3">${card(drugA, resA, 'è–¬å‰¤ A')} ${card(drugB, resB, 'è–¬å‰¤ B')}</div>`;
                
                resultHtml += `
                    <div class="mt-4 pt-4 border-t border-slate-200">
                        <details class="bg-indigo-50 rounded-lg">
                            <summary class="p-3 text-xs font-bold text-indigo-800 flex justify-between items-center">
                                <span>â„¹ï¸ åˆ¤å®šåŸºæº–ã¨ç‚¹æ•°ã®è¦‹æ–¹</span>
                                <i data-lucide="chevron-down" class="w-4 h-4"></i>
                            </summary>
                            <div class="p-3 pt-0 text-[10px] text-indigo-900 leading-relaxed">
                                <div class="mb-2">
                                    <strong>ã€ç‚¹æ•°ã®æ„å‘³ã€‘</strong> 100ç‚¹æº€ç‚¹ã‹ã‚‰ã®æ¸›ç‚¹æ–¹å¼<br>
                                    ãƒ»<span class="font-bold text-emerald-600">100ç‚¹</span>: è¨­å®šã—ãŸèƒŒæ™¯ã«ãŠã„ã¦æ³¨æ„ã™ã¹ãç¦å¿Œãƒ»ãƒªã‚¹ã‚¯ãªã—ï¼ˆå®‰å…¨ï¼‰<br>
                                    ãƒ»<span class="font-bold text-red-600">70ç‚¹æœªæº€</span>: ãƒªã‚¹ã‚¯ãŒé«˜ã„ã€‚å¤‰æ›´ã‚„æ…é‡æŠ•ä¸ãŒå¿…è¦
                                </div>
                                <strong>ã€æ¸›ç‚¹ãƒ«ãƒ¼ãƒ«ï¼ˆç›®å®‰ï¼‰ã€‘</strong>
                                <ul class="list-disc pl-4 space-y-0.5 opacity-90">
                                    <li><span class="font-bold text-red-600">å¿ƒä¸å…¨æ‚ªåŒ–ãƒªã‚¹ã‚¯</span> (NSAIDsç­‰): <span class="font-bold">-90ç‚¹</span> (ã»ã¼ç¦å¿Œ)</li>
                                    <li><span class="font-bold text-red-600">ç¦å¿Œã®ä½µç”¨</span> (ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³+NSAIDsç­‰): <span class="font-bold">-50ç‚¹</span></li>
                                    <li><span class="font-bold text-orange-600">è…æ©Ÿèƒ½ãƒªã‚¹ã‚¯</span> (è…ä½ä¸‹+è…æ’æ³„è–¬): <span class="font-bold">-40ç‚¹</span></li>
                                    <li><span class="font-bold text-orange-600">å‡ºè¡€ãƒªã‚¹ã‚¯</span> (å‡ºè¡€å‚¾å‘+æŠ—å‡å›ºè–¬): <span class="font-bold">-40ç‚¹</span></li>
                                    <li><span class="font-bold text-orange-600">èƒƒè…¸ãƒªã‚¹ã‚¯</span> (èƒƒå¼±+NSAIDs): <span class="font-bold">-40ç‚¹</span></li>
                                    <li><span class="font-bold text-orange-600">è»¢å€’ãƒªã‚¹ã‚¯å¤§</span> (è»¢å€’æ­´+ãµã‚‰ã¤ãè–¬): <span class="font-bold">-30ç‚¹</span></li>
                                    <li><span class="font-bold text-orange-600">è¡€ç³–ãƒªã‚¹ã‚¯</span> (ç³–å°¿ç—…+ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰): <span class="font-bold">-30ç‚¹</span></li>
                                    <li><span class="font-bold text-blue-600">åš¥ä¸‹ãƒªã‚¹ã‚¯</span> (åš¥ä¸‹å›°é›£+ã‚«ãƒ—ã‚»ãƒ«): <span class="font-bold">-20ç‚¹</span></li>
                                    <li>è»½åº¦ã®æ³¨æ„ (ãµã‚‰ã¤ãç­‰): -10ã€œ20ç‚¹</li>
                                </ul>
                            </div>
                        </details>
                    </div>
                `;
                
                resultHtml += `</div>`;
                return resultHtml;
            },

            render() {
                const main = document.getElementById('app');
                
                if (this.state.tab === 'symptom') {
                    main.innerHTML = `
                        <div class="space-y-4 animate-fade-in pb-10">
                            <div class="text-center py-2">
                                <h2 class="text-xl font-bold text-slate-800">ç—‡çŠ¶ã‹ã‚‰æ¢ã™</h2>
                                <p class="text-xs text-slate-400">æ°—ã«ãªã‚‹ç—‡çŠ¶ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                            </div>
                            <div class="grid gap-3">
                                ${SYMPTOMS.map((sym, idx) => {
                                    const isOpen = this.state.symptomIdx === idx;
                                    return `
                                        <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden transition-all duration-300">
                                            <button onclick="app.state.symptomIdx = ${isOpen ? 'null' : idx}; app.render();" class="w-full flex items-center justify-between p-5 bg-white active:bg-slate-50">
                                                <div class="flex items-center gap-4">
                                                    <div class="w-10 h-10 rounded-full ${sym.color} flex items-center justify-center shadow-sm"><i data-lucide="${sym.icon}" class="w-5 h-5"></i></div>
                                                    <span class="font-bold text-slate-700">${sym.label}</span>
                                                </div>
                                                <i data-lucide="${isOpen ? 'chevron-up' : 'chevron-down'}" class="w-5 h-5 text-slate-300"></i>
                                            </button>
                                            ${isOpen ? `
                                                <div class="bg-slate-50 p-4 space-y-3 animate-fade-in border-t border-slate-100">
                                                    ${sym.items.map(item => `
                                                        <div class="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                                                            <div class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider">${item.title}</div>
                                                            <div class="flex flex-wrap gap-2">
                                                                ${item.drugIds.map(id => {
                                                                    const d = DRUGS.find(x => x.id === id);
                                                                    return d ? `<button onclick="app.openModal(${d.id})" class="px-3 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-lg text-sm font-bold transition-colors flex items-center gap-1">${d.name} <i data-lucide="chevron-right" class="w-3 h-3 opacity-50"></i></button>` : '';
                                                                }).join('')}
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            ` : ''}
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `;
                } else if (this.state.tab === 'advisor') {
                    const { drugA, drugB, profile } = this.state.advisor;
                    const options = (curr) => `<option value="">é¸æŠã—ã¦ãã ã•ã„</option>` + CATEGORIES.map(c => `<optgroup label="${c}">${DRUGS.filter(d=>d.cat===c).map(d=>`<option value="${d.id}" ${curr?.id===d.id?'selected':''}>${d.name}</option>`).join('')}</optgroup>`).join('');

                    main.innerHTML = `
                        <div class="space-y-5 animate-fade-in pb-10">
                            <!-- Profile -->
                            <div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-1"><i data-lucide="user" class="w-3 h-3"></i> æ‚£è€…èƒŒæ™¯è¨­å®š</h3>
                                
                                <div class="space-y-2">
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="app.toggleProfile('senior')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.senior ? 'bg-indigo-500 text-white border-indigo-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.senior ? 'âœ“ ' : ''}é«˜é½¢è€…(75~)</button>
                                        <button onclick="app.toggleProfile('renal')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.renal ? 'bg-red-500 text-white border-red-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.renal ? 'âœ“ ' : ''}è…æ©Ÿèƒ½ä½ä¸‹</button>
                                        <button onclick="app.toggleProfile('fall')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.fall ? 'bg-orange-500 text-white border-orange-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.fall ? 'âœ“ ' : ''}è»¢å€’ãƒªã‚¹ã‚¯</button>
                                    </div>
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="app.toggleProfile('diabetes')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.diabetes ? 'bg-blue-600 text-white border-blue-600 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.diabetes ? 'âœ“ ' : ''}ç³–å°¿ç—…</button>
                                        <button onclick="app.toggleProfile('heart')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.heart ? 'bg-rose-500 text-white border-rose-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.heart ? 'âœ“ ' : ''}å¿ƒä¸å…¨</button>
                                        <button onclick="app.toggleProfile('dementia')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.dementia ? 'bg-purple-500 text-white border-purple-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.dementia ? 'âœ“ ' : ''}èªçŸ¥ç—‡</button>
                                        <button onclick="app.toggleProfile('bleeding')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.bleeding ? 'bg-red-600 text-white border-red-600 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.bleeding ? 'âœ“ ' : ''}å‡ºè¡€å‚¾å‘</button>
                                    </div>
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="app.toggleProfile('stomach')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.stomach ? 'bg-pink-500 text-white border-pink-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.stomach ? 'âœ“ ' : ''}èƒƒè…¸è™šå¼±</button>
                                        <button onclick="app.toggleProfile('glaucoma')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.glaucoma ? 'bg-teal-500 text-white border-teal-500 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.glaucoma ? 'âœ“ ' : ''}ç·‘å†…éšœ/å‰ç«‹è…º</button>
                                        <button onclick="app.toggleProfile('warfarin')" class="px-3 py-2 rounded-full text-xs font-bold border transition-all ${profile.warfarin ? 'bg-emerald-600 text-white border-emerald-600 shadow-md' : 'bg-white text-slate-500 border-slate-200'}">${profile.warfarin ? 'âœ“ ' : ''}ãƒ¯ãƒ¼ãƒ•ã‚¡ãƒªãƒ³</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Selectors -->
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <div class="text-[10px] font-bold text-indigo-500 mb-1 ml-1">æ¯”è¼ƒ A</div>
                                    <select onchange="app.setAdvisorDrug('A', this.value)" class="w-full text-sm p-3 rounded-xl border border-indigo-200 bg-white shadow-sm outline-none font-bold text-indigo-900 focus:ring-2 focus:ring-indigo-500">${options(drugA)}</select>
                                </div>
                                <div>
                                    <div class="text-[10px] font-bold text-slate-400 mb-1 ml-1">æ¯”è¼ƒ B</div>
                                    <select onchange="app.setAdvisorDrug('B', this.value)" class="w-full text-sm p-3 rounded-xl border border-slate-200 bg-white shadow-sm outline-none font-bold text-slate-700 focus:ring-2 focus:ring-slate-400">${options(drugB)}</select>
                                </div>
                            </div>

                            <!-- Result -->
                            ${this.getAnalysis()}
                        </div>
                    `;
                } else if (this.state.tab === 'list') {
                    let list = DRUGS;
                    if(this.state.cat) list = list.filter(d => d.cat === this.state.cat);
                    if(this.state.search) {
                        const low = this.state.search.toLowerCase();
                        list = list.filter(d => d.name.toLowerCase().includes(low) || d.general.toLowerCase().includes(low) || d.ef.toLowerCase().includes(low));
                    }

                    main.innerHTML = `
                        <div class="space-y-4 animate-fade-in pb-10">
                            <!-- Search & Cat -->
                            <div class="sticky top-0 bg-slate-100 pt-2 pb-4 z-10 space-y-3">
                                <div class="relative">
                                    <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 h-5 w-5"></i>
                                    <input type="text" placeholder="åå‰ãƒ»æˆåˆ†ã§æ¤œç´¢..." value="${this.state.search}" oninput="app.setSearch(this.value)" class="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none shadow-sm bg-white">
                                </div>
                                <div class="flex flex-wrap gap-2 pb-2">
                                    <button onclick="app.setCat(null)" class="px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${this.state.cat === null ? 'bg-indigo-700 text-white' : 'bg-white border border-slate-200 text-slate-600'}">å…¨ã¦</button>
                                    ${CATEGORIES.map(c => `<button onclick="app.setCat('${c}')" class="px-3 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${this.state.cat === c ? 'bg-indigo-700 text-white' : 'bg-white border border-slate-200 text-slate-600'}">${c}</button>`).join('')}
                                </div>
                            </div>
                            
                            <!-- List -->
                            <div class="grid gap-3">
                                <div class="text-xs font-bold text-slate-400 px-1">${list.length} ä»¶</div>
                                ${list.map(d => `
                                    <div onclick="app.openModal(${d.id})" class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center active:bg-slate-50 transition-colors">
                                        <div>
                                            <div class="flex items-center gap-2 mb-1">
                                                <span class="text-[10px] font-bold bg-slate-100 text-slate-500 px-2 py-0.5 rounded">${d.cat}</span>
                                            </div>
                                            <div class="font-bold text-slate-800">${d.name}</div>
                                            <div class="text-xs text-slate-400 font-mono">${d.general}</div>
                                        </div>
                                        <i data-lucide="chevron-right" class="w-5 h-5 text-slate-300"></i>
                                    </div>
                                `).join('')}
                                ${list.length === 0 ? '<div class="p-8 text-center text-slate-400 border-2 border-dashed border-slate-200 rounded-xl">è©²å½“ãªã—</div>' : ''}
                            </div>
                        </div>
                    `;
                }
                lucide.createIcons();
            }
        };
        app.init();
    </script>
</body>
</html>
